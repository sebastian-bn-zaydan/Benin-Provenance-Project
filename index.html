<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ========== Meta Tags ========== -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ======== Page title ============ -->
    <title>The Benin Provenance Project</title>
    
    <!-- ========== Favicon Icon ========== -->
    <link rel="shortcut icon" href="assets/img/favicon.png">

    <!-- ===========  All Stylesheet ================= -->
    <!--  fontawesome css plugins -->
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">
    <!--  slick css plugins -->
    <link rel="stylesheet" href="assets/css/slick.css">
    <!--  rangeSlider css plugins -->
    <link rel="stylesheet" href="assets/css/ion.rangeSlider.min.css">
    <!--  slick theme css plugins -->
    <link rel="stylesheet" href="assets/css/slick-theme.css">
    <!--  magnific-popup css plugins -->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!--  owl carosuel css plugins
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <!--  owl theme css plugins 
    <link rel="stylesheet" href="assets/css/owl.theme.css">
     -->
    <!--  meanmenu css plugins -->
    <link rel="stylesheet" href="assets/css/meanmenu.min.css">
    <!--  Bootstrap css plugins -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- template main style css file -->
    <link rel="stylesheet" href="style.css">
    <!-- template responsive css stylesheet -->
    <link rel="stylesheet" href="assets/css/responsive.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
	<!--- map stuff -->
	<meta http-equiv="imagetoolbar" content="no">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
	<link rel="stylesheet" href="https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js" type="text/javascript"></script>
	<script src="https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.js" type="text/javascript"></script>
	<script src="./js/leaflet_awesome_number_markers.js"></script>
	<script src="./js/greyscale.js"></script>
	<script src="./js/rainbowvis.js"></script>
	<!-- For Slick Slides -->
	<link rel="stylesheet" type="text/css" href="slick/slick.css"/>
	<link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
	<style type="text/css">
		#basemapslidercontainer {
		  position: absolute;
		  top: 50px;
		  right: 10px;
		  z-index: 1000;
		}

		#basemapslider{
		  font-size:62.5%;
		  margin: 14px;
		  height: 125px;
		  width:7px;
		}

		#map{
		   width: 1200px;
		   height: 500px;
		   background-color: #f1f6f9;
		}
		
		.lflegend { line-height: 18px; color: #555;}
		.lflegend i { width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.7;}
	</style>
	<script>
		// Before map is being initialized.
		var mapsPlaceholder = [];
		L.Map.addInitHook(function () {
		  mapsPlaceholder.push(this); // Use whatever global scope variable you like.
		});
	</script>
	<script>
		$(document).ready(function () {
						  
			$('#basemapslider').mousedown(function(){
			  map.dragging.disable();
			})

			$('#basemapslider').mouseup(function(){
			  map.dragging.enable();
			})
			
			const markerHtmlStyles = `
			  background-color: #fdaf6f;
			  width: 1rem;
			  height: 1rem;
			  display: block;
			  left: -.1rem;
			  top: -.6rem;
			  position: relative;
			  border-radius: .5rem .5rem 0;
			  transform: rotate(45deg);
			  opacity: 0.8;
			  border: 1px solid #FFFFFF`
			  
			 const highlightedMarkerHtmlStyles = `
			  background-color: #FFFFFF;
			  width: 1rem;
			  height: 1rem;
			  display: block;
			  left: -.1rem;
			  top: -.6rem;
			  position: relative;
			  border-radius: .5rem .5rem 0;
			  transform: rotate(45deg);
			  opacity: 0.8;
			  border: 1px solid #d34751`
			
			function addtags(tag,count){
				var newTag = document.createElement("div");
				newTag.classList.add("single-nav");
				newTag.setAttribute("data-tag",tag)
				var newIcon = document.createElement("div");
				newIcon.classList.add("slide-icon");
				newIcon.innerHTML = `<span style="height: 60px;">${tag}</span><img class="gray" src="assets/logos/${tag}.png" width="44px" onError="this.onerror=null;this.src='assets/img/shop.png';" />${count} Artifacts`;
				newTag.appendChild(newIcon);
				//document.getElementById("tagList").appendChild(newTag);
				$('#tagList').slick('slickAdd',newTag);
			};
			
			function mapOnclick(name,item,img_url,item_link){
				name,item,img_url
				//document.getElementById("ArtifactName").innerText = name;
				document.getElementById("ArtifactName").innerHTML = `<a href="${item_link}"> ${name} </a>`;
				document.getElementById("ArtifactName2").innerText = name;
				document.getElementById("artifactImg").src = img_url;
				//console.log(feature.properties.item)
				var featureGeo = "./data/"+item+".geojson";
				//console.log(featureGeo);
				markersLayer.clearLayers();
				ProvData = document.getElementById("ProvData");
				ProvData.innerHTML = '';
				$.getJSON(featureGeo,function(data){
					myL2 = L.geoJson(data,{
						pointToLayer: function(feature,latlng){
							/*
							var thisIcon = L.icon({
								iconUrl: 'assets/img/flag.png',
								color = rainbow.colourAt(feature.properties.year-1550);
								iconSize:     [26, 26], // size of the icon
								popupAnchor:  [0, 0], // point from which the popup should open relative to the iconAnchor
								className: "item-custom-pin"
							});*/
							var thisIcon = L.divIcon({
								html: `<i class="fas fa-map-pin fa-2x" aria-hidden="true" style="color:${rainbowWrapper(feature.properties.year)}"></i>`,
								iconAnchor: [6,15],
								className: "my-custom-pin"
							});
							//rainbow.colourAt(feature.properties.yearmade-1520)
							ProvData = document.getElementById("ProvData");
							var ProvCell = document.createElement("li");
							ProvCell.textContent = feature.properties.provenance;
							ProvData.appendChild(ProvCell);
							var marker = L.marker(latlng,{icon: thisIcon});
							marker.bindPopup('<font size="+2">'+feature.properties.yearStr+'</font>'+'<br/>'+feature.properties.provenance);
							return marker;
						}
					}).addTo(markersLayer);
				})
				map.addLayer(markersLayer);
			};
			var tag_lst = {};
			var mapboxAccessToken = 'pk.eyJ1IjoicGRrZmp6IiwiYSI6ImNramQ2bDY0MTExaHMydnFxdDgxMDUwNnoifQ.BsWJfll89GgrBCqGorqegw';
			var map = L.map('map').setView([40, -20], 2);
			markersLayer = new L.FeatureGroup();
		    var itemMarkers = new L.FeatureGroup();
			var baselayer = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=' + mapboxAccessToken, {
				id: 'mapbox/light-v9',
				maxZoom: 12,
				minZoom: 3,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors'
		    }).addTo(map);
			var inCurrSlide = 0;
			var currSlide = '';
			console.log('here');
		    $.getJSON("./data/all.geojson",function(data){
				document.getElementById("tagAll").textContent = data.features.length+ " Artifacts";
				myL= L.geoJson(data,{
				  onEachFeature: function onEachFeature(feature,layer){
					layer.on('click', function (e) {mapOnclick(feature.properties.name,feature.properties.item,feature.properties.img_url,feature.properties.item_link)})
			      },
				pointToLayer: function(feature,latlng){
					// Code to bind the features to their preview
					//var newItem = document.createElement("div");
					//newItem.classList.add("slide-item");
					//newItem.innerHTML=`<h3>1</h3>`;
					//newItem.className = "col-md-4 col-sm-12";
					var singlePopularItem = document.createElement("div");
					singlePopularItem.classList.add("single-popular-item");
					var itemCoverImage = document.createElement("div");
					itemCoverImage.classList.add("item-cover-image");
					itemCoverImage.classList.add("bg-cover");
					itemCoverImage.style = "background-image: url('"+feature.properties.img_url+"')";
					var tagsDiv = document.createElement("div");
					tagsDiv.className = "tags"
					var  tagsTable = document.createElement("ul");
					//for (var ii = 0; ii < feature.properties.tags.length; ii++) {
					//	tag_lst.add(feature.properties.tags[ii]);
					//	var tag = document.createElement("li");
					//	tag.innerHTML = `<a href="#" onclick="MyFunction('${feature.properties.tags[ii]}');">${feature.properties.tags[ii]}</a>`;
					//	tagsTable.appendChild(tag);
					//}
					tag_lst[feature.properties.institution] = (tag_lst[feature.properties.institution] || 0) + 1;
					var tag = document.createElement("li");
					tag.innerHTML = `<a href="#" onclick="MyFunction('${feature.properties.institution}');">${feature.properties.institution}</a>`;
					tagsTable.appendChild(tag);
					tagsDiv.appendChild(tagsTable);
					itemCoverImage.appendChild(tagsDiv);
					singlePopularItem.appendChild(itemCoverImage);
					var itemCategory = document.createElement("div");
					itemCategory.className="item-category";
					itemCategory.inerHTML = `<div class="cat-icon"><img src="assets/img/cafe.png"></div>`
					singlePopularItem.appendChild(itemCategory);
					var itemContent = document.createElement("div");
					itemContent.className="item-content";
					itemContent.innerHTML = `<div style="height: 100px;"><h5><a href="#" onclick="bindPreview('${feature.properties.name}','${feature.properties.item}','${feature.properties.img_url}')">`+feature.properties.name
						+`</a></h5></div>
							<div style="height: 60px;"><a href="${feature.properties.item_link}">${feature.properties.institution} Page</a></div>
						    <div class="item-feedback">
                                <ul>
                                    <li><i class="fas fa-tag"></i></li>
                                </ul>
                                ${feature.properties.keyword}
                            </div>`;
					var itemDetails = document.createElement("div");
					itemDetails.className = "item-details"
					var itemMeta = document.createElement("div");
					itemMeta.className="item-meta-data open";
					var repatriated = "refused"
					switch (feature.properties.repatriated) {
					case "p": repatriated = "promised"; break;
					case "y": repatriated = "underway"; break;
					case "m": repatriated = "under consideration"; break;};
					itemMeta.innerHTML = `
					             <ul>
                                    <li>
										<i class="fas fa-map-marker-alt"></i>
										<span><small>repatriation ${repatriated}</small></span></li>
                                </ul>`;
					itemContent.appendChild(itemMeta);
					singlePopularItem.appendChild(itemContent);
                    if (inCurrSlide == 0) {
						currSlide = singlePopularItem;
						inCurrSlide = 1;
					} else {
						var supItem = document.createElement("div");
						supItem.classList.add("slide-item");
						supItem.appendChild(currSlide);
						supItem.appendChild(singlePopularItem);
						$('#dish-preview').slick('slickAdd',supItem);
						inCurrSlide = 0;
					}
					<!--console.log(feature.properties.name);-->
					///////////////////
					var thisIcon = L.divIcon({
						html: `<span id="${feature.properties.name+'_pin'}" style="${markerHtmlStyles};" />`,
						className: "my-custom-pin"
					});
					var marker = L.marker(latlng,{icon: thisIcon});
					marker.name = feature.properties.name;
					marker.item = feature.properties.item;
					marker.img_url = feature.properties.img_url;
					<!--
					marker.bindPopup('<font size="+2">'+feature.properties.name+'</font>'+'<br/><img src="'+feature.properties.image_url+'" width="250" onerror="this.style.display=\'none\'"/>');
					-->
					marker.on('mouseover', function(e) {
						var popup = L.popup()
					   .setLatLng(e.latlng) 
					   .setContent('<font size="+1">'+feature.properties.name+'</font>'+'<br/><img src="'+feature.properties.img_url+'" style="  width: 200px; height: 100px; object-fit: contain;" onerror="this.style.display=\'none\'"/>')
					   .openOn(map)
					});
					return marker;
			   }
		   }).addTo(map);
		   for (var key in tag_lst){
			   addtags(key,tag_lst[key]);
		   }
		   var legend = L.control({position: 'topleft'});
		   legend.onAdd = function (map) {
				var div = L.DomUtil.create('div', 'info lflegend'),
					grades = [2012, 1960, 1930, 1897],
					labels = [];
					
				for (var i = 0; i < grades.length; i++) {
					div.innerHTML +=
						'<i style="background:#' + rainbow.colourAt(grades[i]-1897) + '"></i> ' +
						grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '>');
				}
				return div;
			};
			legend.addTo(map);
		});
	})
	</script>
	<script>
	const markerHtmlStyles = `
		  background-color: #fdaf6f;
		  width: 1rem;
		  height: 1rem;
		  display: block;
		  left: -.1rem;
		  top: -.6rem;
		  position: relative;
		  border-radius: .5rem .5rem 0;
		  transform: rotate(45deg);
		  opacity: 0.8;
		  border: 1px solid #FFFFFF`
	const markerHtmlStylesClicked = `
		  background-color: #6699ff;
		  width: 2rem;
		  height: 2rem;
		  display: block;
		  left: -.1rem;
		  top: -.6rem;
		  position: relative;
		  border-radius: .5rem .5rem 0;
		  transform: rotate(45deg);
		  opacity: 0.8;
		  border: 1px solid #FFFFFF`
	var rainbow = new Rainbow(); 
		  rainbow.setNumberRange(1, 2012-1897);
		  rainbow.setSpectrum('#32976b', '#321237');
		  //rainbow.setSpectrum('#c1f2fe', '#007bff');
	function rainbowWrapper(year) {
		return (year > 1897) ? "#"+rainbow.colourAt(year-1897) : "#32976b";
	}
	function MyFunction(val) {
		markersLayer.clearLayers();
		Object.keys(myL._layers).forEach(function(key){
			layer = myL._layers[key];
			if (layer.feature.properties.institution == val) {
				//console.log(myL._layers)
				//console.log('that was key')
				//document.getElementById(layer.feature.properties.name+'_pin').style = markerHtmlStylesClicked
				document.getElementById(layer.feature.properties.name+'_pin').style.backgroundColor = "#dc2426";
				//"#6699ff";
			} else {
				document.getElementById(layer.feature.properties.name+'_pin').style.backgroundColor = "#fdaf6f";
			}
		})
	}
	</script>
	<script>
	function bindPreview(name,item,img_url){
		console.log(name,item,img_url);
		document.getElementById("ArtifactName").innerText = name;
		document.getElementById("artifactImg").src = img_url;
		//console.log(feature.properties.item)
		var featureGeo = "./data/"+item+".geojson";
		//console.log(featureGeo);
		markersLayer.clearLayers();
		ProvData = document.getElementById("ProvData");
		ProvData.innerHTML = '';
		$.getJSON(featureGeo,function(data){
			myL2 = L.geoJson(data,{
				pointToLayer: function(feature,latlng){
					var thisIcon = L.icon({
						iconUrl: 'assets/img/flag.png',
						iconSize:     [26, 26], // size of the icon
						popupAnchor:  [0, 0], // point from which the popup should open relative to the iconAnchor
						className: "item-custom-pin"
					});
					ProvData = document.getElementById("ProvData");
					var ProvCell = document.createElement("li");
					ProvCell.textContent = feature.properties.provenance;
					ProvData.appendChild(ProvCell);
					var marker = L.marker(latlng,{icon: thisIcon});
					marker.bindPopup('<font size="+2">'+feature.properties.yearStr+'</font>'+'<br/>'+feature.properties.provenance);
					return marker;
				}
			}).addTo(markersLayer);
		})
		map = document.getElementById("map");
		console.log(map);
		mapsPlaceholder[0].addLayer(markersLayer);
	};
	</script>
</head>

<body class="theme_body">
	<!------------------------ MODAL -------------------------->
	
	 <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-dialog modal-vertical-centered">
                <div class="modal-content">
                    <div class="modal-header">
						<h4 class="modal-title" id="myModalLabel">Welcome to Benin Provenance Project</h4>
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    </div>
                    <div class="modal-body">
                        This project visualizes the provenance data of artifacts stolen during the 1897 sacking of Benin city by the British military. 
                            The aim is to organize the data in an accessible manner that fascilitates research and enables activists and academics to gain new insights
                            and organize around the cause of returning stolen artifacts to their rightful place in Benin and other countries.<br/>
                            - Press on a map marker or an title from the artifact preview to expand the item provenance. </br>
                            - Press on a musuem from the pannel below the map to filter by institution, or press a musuem tag from an artifact preview.</br>
                            - Navigate to the "find" page to search by name.
                    </div>
                    <div class="modal-footer">
                        <label ><input class="dont" type="checkbox" name="dismiss"> Don't show again</label><br />
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
      </div>
	 <!-- Initiates Modal and Uses cookies for Dont Show Again Checkbox -->     
		<script type="text/javascript">
		 $(document).ready(function () {
			$('#myModal').modal();
		  
		   //check cookies
			function setCookie(){
				var dis = document.cookie;
				while(dis.charAt(0)==" ") dis = dis.substring(1);
				if(dis.substring(8,13)== "false"){
					$('#myModal').modal('hide');
				}
				console.log(dis.substring(8,13));
			}
			setCookie();    
			 
			 
			  var $check = $("input.dont").click(function(){
				if($("input.dont").is(":checked")){
				document.cookie = "display=false";        
				}else{
				document.cookie = "display=true";        
				}
				  
			  });
		 });
		</script>
			   
		<!-- Centers Modal Vertically -->      
		<script type="text/javascript">
			  function centerModal() {
			$(this).css('display', 'block');
			var $dialog = $(this).find(".modal-dialog");
			var offset = ($(window).height() - $dialog.height()) / 2;
			// Center modal vertically in window
			$dialog.css("margin-top", offset);
		}

		$('.modal').on('show.bs.modal', centerModal);
		$(window).on("resize", function () {
			$('.modal:visible').each(centerModal);
		});
		</script>
	<!------------------------ MODAL -------------------------->  
    
    <!-- preloader element started -->
        <div class="loader-wrap">
            <div class="pin"></div>
            <div class="pulse"></div>
        </div>
    <!-- preloader element end -->
    
    
    <!-- header section start -->
    <header class="header-section">
        <!-- top bar -->
        <div class="top-bar-header">
            <div class="container">
                <div class="row">
                    <div class="col-xl-6 col-md-8 col-12">
                        <div class="top-bar-left">
                            <span>Mapping the Provenance of the Benin Bronzes</span>
                        </div>
                    </div>
                    <div class="col-xl-6 col-md-4 col-12 text-md-right">
                        <div class="top-bar-right">
                            <div class="user-setting">
                                <ul>
									<!--
                                    <li><a href="#"><i class="fas fa-sign-out-alt"></i>Login</a></li>
                                    -->
                                    <li><a href="#"><i class="fas fa-user"></i>Contact</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- main menu -->
        <div class="main-header">
            <div class="container">
                <div class="row">
                    <div class="col-md-3 logo">
                        <a class="navbar-brand" href="index.html">
                            <img src="assets/img/logo.png" class="logo-display" alt="shipo">
                        </a> 
                    </div> <!-- /.col-md-3 logo -->
                    <div class="col-md-9 d-none d-lg-block text-lg-right">
                        <nav id="responsive-menu" class="main-menu">
                            <ul class="menu-items">
                                <li><a href="./index.html">map</a>
									<!--
                                    <ul class="submenu">
                                        <li><a href="index.html">Home One</a></li>
                                        <li><a href="index-2.html">Home Two</a></li>
                                    </ul>
                                    -->    
                                </li>
                                 <li><a href="#about-footer">About</a>
                                    <ul class="submenu">
                                        <li><a href="./history.html#positionality">Positionality</a></li>
                                    </ul></li>
                                 <li><a href="./history.html">History</a>    
                                 </li>
                                 <li><a href="explors-map-sidebar.html">Find</a></li>
                                 <li><a href="./People-Institutions.html">People and Institutions</a></li>
									<!--
                                    <ul class="submenu">
                                        <li><a href="login.html">login</a></li>
                                        <li><a href="register.html">register</a></li>
                                        <li><a href="booking.html">booking</a></li>
                                        <li><a href="popular-locations.html">Popular Place</a></li>
                                        <li><a href="contact.html">contact</a></li>
                                    </ul>
                                    --> 
                                </li>
                            </ul>
                            <a href="https://forms.gle/oobmXQusryxHoMHt9" class="btn-booking-start">Submit Missing Items</a>
                        </nav>
                    </div> <!-- /. col-md-9 d-none d-lg-block -->

                    <div class="col-12">
                        <div class="responsive-menu"></div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header section end -->

    <!-- hero section start -->
    <section class="hero-section welcome-section">
        <div class="container-fluid m-lg-0 p-lg-0">
            <div class="row">
                <div class="search-section d-flex col-lg-5 col-sm-12 p-0 bg-cover" style="background-image: url('assets/img/Drawing_of_Benin_City_made_by_an_English_officer_1897.jpg')">
                    <div class="search-tab-wrap">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                           <li class="nav-item">
                              <a class="nav-link active" data-toggle="tab" href="#place">Artifact</a>
                           </li>
                           <li class="nav-item">
                              <a class="nav-link" data-toggle="tab" href="#event">Provenance</a>
                           </li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                           <div class="tab-pane active container" id="place">
                               <div class="search-form-box">
                                   <h3 id="ArtifactName"> The Benin/Edo Provenance Project</h3>
                                   <p>Looted objects from the Benin Punative Raid, 1897. Press on a map marker or an artifact name from the preview below to expand item information and provenance.</p>
                                   <img id="artifactImg" class="img-fluid" src="./assets/img/Looted_objects_from_the_Benin_Punative_Raid_1897.jpg" width="250" onerror="this.style.display=\'none\'"/>
                               </div>
                           </div>
                           <div class="tab-pane container" id="aboutArtifcat">
                               <div class="search-form-box">
                                   <h3 id="ArtifactName"> The Benin Provenance Project</h3>
                                   <p id="artifactData">
                                   All data is updated directly from the institutions. 
                                   </p>
                               </div>
                           </div>
                           <div class="tab-pane container" id="event">
							   <!--
                                <div class="search-form-box">
                                   <h3>Discover Great Event.</h3>
                                   <p>Tag: Nightlife, Hotel, Restaurant, Sport, Shop.</p>
                                   <form action="#" class="search-form">
                                       <input type="text" placeholder="Where to go?" name="place">
                                       <input type="text" placeholder="Location" name="location">
                                       <select>
                                           <option value="Categroy">Categroy</option>
                                           <option value="1">Hotel</option>
                                           <option value="2">Restaurant</option>
                                           <option value="3">Property</option>
                                           <option value="4">Shopping</option>
                                       </select>
                                       <button type="submit">Search request</button>
                                   </form>
                               </div>
                               -->
							   <h3 id="ArtifactName2"> The Benin Provenance Project</h3>
							   <ul id="ProvData" class="prov">
								   Press on a map marker or an artifact name from the preview below to expand item information and provenance.
							   </ul>                             
                           </div>
                        </div>
                    </div>
                </div>
                <div class="slider-section col-lg-6 col-sm-12 p-0">
					<div id="map-holder">
						<div class="mycontainer myfill">
							<div id="map">
								<div id="basemapslidercontainer">
									<div id="basemapslider">
									</div>
								</div>
							</div>
						</div>
					</div>
					<!--
                    <div class="slides listico-slider">
                        <div class="single-slide">
                           <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d58400.47931449054!2d90.40927917566997!3d23.817533751206252!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sBars!5e0!3m2!1sen!2sbd!4v1562019287484!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                        <div class="single-slide">
                           <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d116765.49789143789!2d90.28748999112247!3d23.85691014031508!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sHotels!5e0!3m2!1sen!2sbd!4v1562018865814!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                        <div class="single-slide">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d5161.9500897305015!2d90.3667025947699!3d23.816824102524652!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sRestaurants!5e0!3m2!1sen!2sbd!4v1562019214497!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                        <div class="single-slide">
                           <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d58400.47931449054!2d90.40927917566997!3d23.817533751206252!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sBars!5e0!3m2!1sen!2sbd!4v1562019287484!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                        <div class="single-slide">
                           <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d116765.49789143789!2d90.28748999112247!3d23.85691014031508!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sHotels!5e0!3m2!1sen!2sbd!4v1562018865814!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                        <div class="single-slide">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d5161.9500897305015!2d90.3667025947699!3d23.816824102524652!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sRestaurants!5e0!3m2!1sen!2sbd!4v1562019214497!5m2!1sen!2sbd"  style="border:0" allowfullscreen></iframe>
                        </div>
                    </div>
                    -->
                    <div id="tagList">
                        <div class="single-nav">
                            <div class="slide-icon">
                                <span style="height: 60px;">All Institutions</span>
                                <img src="assets/img/shop.png" alt="listico">
                                <div  id="tagAll"> 2 Artifacts</div>
                            </div>
                        </div>
                        <!--
                        <div class="single-nav">
                            <div id="tagN2" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        <div class="single-nav">
                            <div id="tagN3" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        <div class="single-nav">
                            <div id="tagN4" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        <div class="single-nav">
                            <div id="tagN5" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        <div class="single-nav">
                            <div id="tagN6" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        <div class="single-nav">
                            <div id="tagN7" class="slide-icon">
                                <span>Shopping</span>
                                <img src="assets/img/shop.png" alt="listico">
                                2 Listing
                            </div>
                        </div>
                        -->
                    </div>
                </div>
            </div>
       </div>
    </section>
    <!-- hero section end -->

    <!-- Popular Categories carousel section start -->
    <section class="popular-categories carousel-section section-padding">
        <div class="container">
            <div class="row">
                <div class="col-xl-12">
                    <div id="dish-preview" class="artifact-slide">
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Popular Categories  carouselsection end -->
    <!-- how it works section start -->
    <section class="how-it-works bg-overlay section-padding bg-cover parallax-2" style="background-image: url('assets/img/Drawing_of_Benin_City_made_by_an_English_officer_1897.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-xl-12 text-center">
                    <div class="section-title white-color">
                        <h2>Further Readings</h2>
                        <span>The following refernces were helpful when compiling the list used to make this website</span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-6 col-md-12 col-sm-12">
                    <div class="single-how-works d-flex align-items-start">
                        <div class="how-icon">
                            <span>01</span>
                            <div class="books">
                            <a href="http://www.plutobooks.com/9780745341767/the-brutish-museums/">
                            <img class="img-fluid" src="./assets/images/Brutish.jpg" alt="listico">
                            </a>
                            </div>
                        </div>
                        <div class="how-works">
                            <h3>The Brutish Museums</h3>
                            <h6 style="color:#fff">The Benin Bronzes, Colonial Violence and Cultural Restitution</h6>
                            <!--
                            <p>Dan Hicks makes a powerful case for the urgent return of such objects, as part of a wider project of addressing the outstanding debt of colonialism.</p>
                            -->
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 col-md-12 col-sm-12">
                    <div class="single-how-works d-flex align-items-start">
                        <div class="how-icon">
                            <span>02</span>
                            <div class="books">
                            <a href="https://oneworld-publications.com/loot-hb.html">
                            <img class="img-fluid" src="./assets/images/Loot.jpg" alt="listico">
                            </a>
                            </div>
                        </div>
                        <div class="how-works">
                            <h3>LOOT:</h3>
                            <h6 style="color:#fff">Britain and the Benin Bronzes</h6>
                            <!--
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae officia libero inventore, eos quae.</p>
                            -->
                        </div>
                    </div>
                </div>
                <!--
                <div class="col-xl-4 col-md-12 col-sm-12">
                    <div class="single-how-works d-flex align-items-start">
                        <div class="how-icon">
                            <span>03</span>
                            <img src="assets/img/armchair.png" alt="listico">
                        </div>
                        <div class="how-works">
                            <h3>Charge lots of chairs</h3>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae officia libero inventore, eos quae.</p>
                        </div>
                    </div>
                </div>
                -->
            </div>
        </div>
    </section>
    <!-- how it works section end -->

    <!-- populer location section start
    <section class="top-location-section section-padding">
        <div class="container">
            <div id="PeopleInstitutions" class="row">
                <div class="col-sm-12 col-xl-12 text-center">
                    <div class="section-title">
                        <h2>People & Institutions</h2>
                        <span>Who owns What When Where?</span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-6 col-md-12 col-sm-12">
					<svg id="ProvTree"></svg>
				</div>
                <div class="col-xl-6 col-md-12 col-sm-12">
					<div id="my_dataviz"></div>
				</div>
			</div>
        </div>
    </section>
     -->
    
    <!-- happy client testimonial section start
    <section class="testimonial-section bg-overlay section-padding bg-cover" style="background-image: url('assets/img/call-to-action-bg.jpg')">
	 -->
	<section class="call-to-action-wrap bg-cover"><!--style="background-image: url('assets/img/call-to-action-bg.jpg')">-->
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-xl-12 text-center">
                        <h2>In The Media</h2>
                        <!--
                        <span>Why you chose us for the best places around the world</span>
                        https://www.smithsonianmag.com/smart-news/major-push-museums-around-world-make-plans-repatriate-benin-bronzes-nigeria-180977519/
                        https://www.aljazeera.com/news/2021/4/16/from-germany-to-ireland-a-fresh-push-to-return-the-benin-bronzes
                        https://www.theartnewspaper.com/news/ucla-s-fowler-museum-seeks-talks-with-nigeria-on-return-of-benin-bronzes
                        -->
                </div>
            </div>
            <div class="row">
                <div id="media-slide" class="col-md-12 testimonial-carousel">
                    <div class="single-testimonial text-center">
                        <div class="testimonials" align="center">
							<a class="media-link" href="https://www.artnews.com/art-news/news/germany-returns-benin-bronzes-2022-declaration-1234591348/">
							<img src="https://mma.prnewswire.com/media/1033565/PMC_ARTnews_Logo.jpg" alt="listico">
							<div style="height:60px;">
                            <span>Germany Commits to Returning Benin Bronzes Starting in 2022.</span>
                            </div>
                            </a>
                        </div>
                    </div> <!-- ./ single testimonail end -->
                    <div class="single-testimonial text-center">
                        <div class="testimonials" align="center">
							<a class="media-link" href="https://www.aljazeera.com/news/2021/4/16/from-germany-to-ireland-a-fresh-push-to-return-the-benin-bronzes">
							<img src="https://1000logos.net/wp-content/uploads/2023/01/Al-Jazeera-Logo.png" alt="listico">
							<div style="height:60px;">
                            <span>From germany to ireland, a fresh push to return the Benin Bronzes.</span>
                            </div>
                            </a>
                        </div>
                    </div> <!-- ./ single testimonail end -->
                    <div class="single-testimonial text-center center">
                        <div class="testimonials" align="center">
							<a class="media-link" href="https://www.smithsonianmag.com/smart-news/major-push-museums-around-world-make-plans-repatriate-benin-bronzes-nigeria-180977519/">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Smithsonian_logo_color.svg/960px-Smithsonian_logo_color.svg.png" alt="listico">
                            <div style="height:60px;">
                            <span>Museums Around the World Make Renewed Push to Repatriate Benin Bronzes</span>
                            </div>
                            </a>
                        </div>
                    </div> <!-- ./ single testimonail end -->
                    <div class="single-testimonial text-center center">
                        <div class="testimonials" align="center">
							<a class="media-link" href="https://www.theartnewspaper.com/news/ucla-s-fowler-museum-seeks-talks-with-nigeria-on-return-of-benin-bronzes">
                            <img src="https://cdn.sanity.io/images/cxgd3urn/production/2b3466774dc5776b98c0047e115924687dff5e5e-366x80.svg" alt="listico">
                            <div style="height:60px;">
                            <span>UCLA’s Fowler Museum to reach out to Nigeria about returning its Benin bronzes</span>
                            </div>
                            </a>
                        </div>
                    </div> <!-- ./ single testimonail end -->
                    <div class="single-testimonial text-center center">
                        <div class="testimonials" align="center">
							<a class="media-link" href="https://tribuneonlineng.com/church-of-england-agrees-to-return-two-benin-bronzes-given-to-late-archbishop-of-canterbury-in-1982/">
                            <img src="https://tribuneonlineng.com/wp-content/uploads/2019/01/logo-mast-head.jpg" alt="listico">
                            <div style="height:60px;">
                            <span>Church of England agrees to return two Benin Bronzes given to late Archbishop of Canterbury in 1982</span>
                            </div>
                            </a>
                        </div>
                    </div> <!-- ./ single testimonail end -->
                </div>
            </div> <!-- /.col-md-12 testimonial-carousel owl-carousel -->
        </div>
    </section>
    <!-- happy client testimonial section end -->

    <!-- Top Event  section start
    <section class="top-event-section section-padding">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-xl-12 text-center">
                    <div class="section-title">
                        <h2>Top Events</h2>
                        <span>Why Freatures selection of the best places around the world</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Top Event  section end -->

    <!-- promo section start
    <section class="promo-section parallax section-padding bg-cover bg-overlay" style="background-image: url('assets/img/promo-bg.jpg')">
        <div class="container">
            <div class="row d-flex align-items-center">
                <div class="col-xl-7 col-sm-12 col-md-7">
                    <div class="promo-content">
                        <h1>Visit the Best Cafes House <br>Restaurants & Bars </h1>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore</p>
                        <a href="#" class="btn-promo">Visit Site</a>
                    </div>
                </div>
                <div class="col-xl-5 col-md-5 col-sm-12 mobile-none">
                    <div class="promo-img">
                        <img src="assets/img/promo-man.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- promo section end -->

    <!-- populer location section end -->

    <!-- call to action section start
    <section class="call-to-action-wrap bg-cover" style="background-image: url('assets/img/call-to-action-bg.jpg')">
        <div class="container">
            <div class="row d-flex align-items-center">
                <div class="col-xl-8 col-sm-12  col-md-7">
                    <div class="call-to-action">
                        <h2>Join Our Amazing Community</h2>
                        <span>Consectetur adipisicing elit, sed do eiusmod tempor</span>
                    </div>
                </div>
                <div class="col-xl-4 col-sm-12 col-md-5 text-lg-right">
                    <a href="#" class="call-action-btn"><i class="far fa-check-circle"></i>Contact Now</a>
                </div>
            </div>
        </div>
    </section>
    <!-- call to action section end -->


    <!-- footer section wrapper start -->
    <footer class="footer-section">
        <div class="footer-widgets-section">
            <div class="container">
                <div class="row">
                    <div class="col-xl-6 col-md-6 col-lg-3 col-sm-12">
                        <div class="single-footer-widget">
                            <div id="about-footer" class="widget-title">
                                <h4>About</h4>
                            </div>
                            <p>This project visualizes the provenance data available for artifacts stolen during the 1897 sacking of Benin city by the British military. 
                            The aim is to organize the data in an accessible manner that fascilitates research and enables activists and academics to gain new insights
                            and organize around the cause of returning stolen artifacts to their rightful place in Benin and other countries.</p>
                        </div>
                    </div>

                    <div class="col-xl-3 col-md-6 col-lg-3 col-sm-12">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h4>Contributor</h4>
                            </div>
                            <p><a href="https://github.com/sebastian-bn-zaydan" style="color:#dc2426;">
									<strong><i class="fab fa-github"></i> Sebastian Bn-Zaydan</strong>
                                </a>
                            <!--
                            <div class="social-icons">
                                <span>Follow Me</span>
                                <ul>
                                    <li><a href="https://github.com/sebastian-bn-zaydan"><i class="fab fa-github"></i></a></li>
                                </ul>
                            </div>
                            -->
                            Engineer and a digital humanist in training from Palestine. Interested in natural language processing for social good.
                            </p>
                        </div>
                    </div>

                    <div class="col-xl-3 col-md-6 col-lg-3 col-sm-12">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h4>Public Institutions With Artifacts</h4>
                            </div>
                            <div class="widget-cats row">
                                <ul class="col-12 col-lg-6">
                                    <li><a href="#">MFA</a></li>
                                    <li><a href="#">The British-Museum</a></li>
                                </ul>
                                <ul class="col-12 col-lg-6">
									<li><a href="#">Smithsonian</a></li>
                                    <li><a href="#">Weltmuseum</a></li>
                                    <li><a href="#">Varldskultur</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
					<!--
                    <div class="col-xl-3 col-md-6 col-lg-3 col-sm-12">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h4>Subscribe</h4>
                            </div>
                            <div class="subscribe-box">
                                <form action="#">
                                    <input type="text" placeholder="Email address">
                                    <button type="submit">send</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    -->

                </div>
            </div>
        </div>
        <div class="footer-bottom-section">
            <div class="container">
                <div class="row">
                    <div class="col-xl-6 col-sm-12">
                        <span><i class="fas fa-balance-scale"></i> GNU General Public License v3.0</span>
                    </div>
                    <div class="col-xl-6 col-sm-12">
                        <div class="footer-menu">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">About</a></li>
                                <li><a href="#">History</a></li>
                                <li><a href="#">Find</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer section wrapper end -->



    <!--  ALl JS Plugins
    ====================================== -->
    <script src="assets/js/jquery-1.12.4.min.js"></script>
    <script src="assets/js/jquery.easing.1.3.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/scrollUp.min.js"></script>
    <script src="assets/js/magnific-popup.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
	<script type="text/javascript" src="slick/slick.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
		  $('#dish-preview').slick({
			rows: 2,
			infinite: true,
			arrows: true,
			dots: true,
			slidesToShow: 4,
			slidesToScroll: 2
		  });
		  $('#tagList').slick({
			infinite: true,
			arrows: true,
			dots: false,
			slidesToShow: 4,
			slidesToScroll: 1
		  });
		  $('#media-slide').slick({
			infinite: true,
			arrows: false,
			dots: false,
			slidesToShow: 3,
			slidesToScroll: 1,
			autoplay: true,
			autoplaySpeed: 4000,
		  });
		  $('#tagList').on('click', '.slick-slide', function (e) {
			e.stopPropagation();
			var index = $(this).data("slick-index");
			if ($('.slick-slider').slick('slickCurrentSlide') !== index) {
			  $('.slick-slider').slick('slickGoTo', index);
			}
			MyFunction(this.getAttribute("data-tag"));
		  });
		});
	</script>
	<!--
	<script>
		// set the dimensions and margins of the graph
		var margin = {top: 20, right: 0, bottom: 0, left: 50},
			width = 420 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom,
			innerRadius = 30,
			outerRadius = Math.min(width, height) / 3;   // the outerRadius goes from the middle of the SVG area to the border

		// append the svg object
		var peopleSvg = d3.select("#my_dataviz")
		  .append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("transform", "translate(" + (width / 2 + margin.left) + "," + (height / 2 + margin.top) + ")");

		d3.csv("./data/Institutions.csv", function(data) {
		  // Scales
		  var x = d3.scaleBand()
			  .range([0, 2 * Math.PI])    // X axis goes from 0 to 2pi = all around the circle. If I stop at 1Pi, it will be around a half circle
			  .align(0)                  // This does nothing
			  .domain(data.map(function(d) { return d.Institution; })); // The domain of the X axis is the list of states.
		  var y = d3.scaleRadial()
			  .range([innerRadius, outerRadius])   // Domain will be define later.
			  .domain([0, 13]); // Domain of Y is from 0 to the max seen in the data

		  // Add the bars
		  peopleSvg.append("g")
			.selectAll("path")
			.data(data)
			.enter()
			.append("path")
			  .attr("fill", "#dc2426")
			  .attr("d", d3.arc()     // imagine your doing a part of a donut plot
				  .innerRadius(innerRadius)
				  .outerRadius(function(d) { return y(d['Value']); })
				  .startAngle(function(d) { return x(d.Institution); })
				  .endAngle(function(d) { return x(d.Institution) + x.bandwidth(); })
				  .padAngle(0.01)
				  .padRadius(innerRadius))

		  // Add the labels
		  peopleSvg.append("g")
			  .selectAll("g")
			  .data(data)
			  .enter()
			  .append("g")
				.attr("text-anchor", function(d) { return (x(d.Institution) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? "middle" : "middle"; })
				.attr("transform", function(d) { return "rotate(" + ((x(d.Institution) + x.bandwidth() / 2) * 180 / Math.PI - 90) + ")"+"translate(" + (y(d['Value'])+10) + ",0)"; })
			  .append("text")
				.text(function(d){return(d.Institution)})
				.attr("transform", function(d) { return ((x(d.Institution) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) >= Math.PI /2 && (x(d.Institution) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) <= Math.PI * 3/2) ? "rotate(90)" : "rotate(270)"; })
				.style("font-size", "11px")
				.attr("alignment-baseline", "middle")

		});

		</script>
		<script src="./js/d3slanky.js"></script>
		<script>
			
		var units = "Widgets";

		// set the dimensions and margins of the graph
		var margin = {top: 10, right: 10, bottom: 10, left: 10},
			width = 400 - margin.left - margin.right,
			height = 400 - margin.top - margin.bottom;

		// format variables
		var formatNumber = d3.format(",.0f"),    // zero decimal places
			format = function(d) { return formatNumber(d) + " " + units; },
			color = d3.scaleOrdinal(d3.schemeCategory10);

		// append the svg object to the body of the page
		var svg = d3.select("#ProvTree")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("transform", 
				  "translate(" + margin.left + "," + margin.top + ")");

		// Set the sankey diagram properties
		var sankey = d3.sankey()
			.nodeWidth(10)
			.nodePadding(10)
			.size([width, height]);

		var path = sankey.link();

		// load the data
		d3.csv("./data/People.csv", function(error, data) {
		  var pirainbow = new Rainbow(); 
		  pirainbow.setNumberRange(1,2020-1860);
		  pirainbow.setSpectrum('#6699ff', '#dc2426');
		  //set up graph in same style as original example but empty
		  graph = {"nodes" : [], "links" : []};

		  data.forEach(function (d) {
			graph.nodes.push({ "name": d.source });
			graph.nodes.push({ "name": d.target });
			graph.links.push({ "source": d.source,
							   "target": d.target,
							   "value": +d.value });
		   });

		  // return only the distinct / unique nodes
		  graph.nodes = d3.keys(d3.nest()
			.key(function (d) { return d.name; })
			.object(graph.nodes));

		  // loop through each link replacing the text with its index from node
		  graph.links.forEach(function (d, i) {
			graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
			graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
		  });

		  // now loop through each nodes to make nodes an array of objects
		  // rather than an array of strings
		  graph.nodes.forEach(function (d, i) {
			graph.nodes[i] = { "name": d };
		  });

		  sankey
			  .nodes(graph.nodes)
			  .links(graph.links)
			  .layout(32);

		  // add in the links
		  var link = svg.append("g").selectAll(".link")
			  .data(graph.links)
			.enter().append("path")
			  .attr("class", "link")
			  .attr("d", path)
			  .style("stroke-width", function(d) { return Math.max(1, d.dy); })
			  .sort(function(a, b) { return b.dy - a.dy; });

		  // add the link titles
		  link.append("title")
				.text(function(d) {
					return d.source.name + " → " + 
						d.target.name + "\n" + format(d.value); });

		  // add in the nodes
		  var node = svg.append("g").selectAll(".node")
			  .data(graph.nodes)
			.enter().append("g")
			  .attr("class", "node")
			  .attr("transform", function(d) { 
				  return "translate(" + d.x + "," + d.y + ")"; })
			  .call(d3.drag()
				.subject(function(d) {
				  return d;
				})
				.on("start", function() {
				  this.parentNode.appendChild(this);
				})
				.on("drag", dragmove));

		  // add the rectangles for the nodes
		  node.append("rect")
			  .attr("height", function(d) { return d.dy; })
			  .attr("width", sankey.nodeWidth())
			  .style("fill", function(d) { 
				  //return d.color = pirainbow.colourAt(d.source.year-1860); })
				  return d.color = color(d.name.replace(/ .*/, "")); })
			  .style("stroke", function(d) { 
				  return d3.rgb(d.color).darker(2); })
			.append("title")
			  .text(function(d) { 
				  return d.name + "\n" + format(d.value); });

		  // add in the title for the nodes
		  node.append("text")
			  .attr("x", -6)
			  .attr("y", function(d) { return d.dy / 2; })
			  .attr("dy", ".35em")
			  .attr("text-anchor", "end")
			  .attr("transform", null)
			  .text(function(d) { return d.name; })
			.filter(function(d) { return d.x < width / 2; })
			  .attr("x", 6 + sankey.nodeWidth())
			  .attr("text-anchor", "start");

		  // the function for moving the nodes
		  function dragmove(d) {
			d3.select(this)
			  .attr("transform", 
					"translate(" 
					   + d.x + "," 
					   + (d.y = Math.max(
						  0, Math.min(height - d.dy, d3.event.y))
						 ) + ")");
			sankey.relayout();
			link.attr("d", path);
		  }
		});

		</script>
	-->
    <script src="assets/js/ion.rangeSlider.min.js"></script>
    <script src="assets/js/rater.min.js"></script>
    <script src="assets/js/meanmenu.min.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>
